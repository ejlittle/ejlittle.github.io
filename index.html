<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>zzyxtv Twitch Channel Followers</title>
	<meta name="description" content="zzyxtv followers">
	<meta name="author" content="Eric Little">

	<!--<link rel="stylesheet" href="css/styles.css?v=1.0">-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script type="text/javascript">
	$.ajax({
		method: 'GET',
		url: 'https://api.twitch.tv/kraken/channels/zzyzxtv/follows?client_id=wt1mlkhwqcyui3s0t2cgcx0znvhrjq',
		data: {
			direction: 'asc',
			limit: 25
		},
		success: function(res) {
			console.log(res);
			$.each(res.follows, function(k,v) {
				$("ol").append("<li>" + v.user.display_name + " followed you on " + v.created_at + "</li>")
			});
			$("body").append('<a href="javascript:void(0);" id="loadmore">Next 25 Followers</a>');
			$("#loadmore").data("nextpage", res._links.next);
		}
	});
	
	$("body").on("click", "#loadmore", function() {
		$.ajax({
			method: 'GET',
			url: $(this).data("nextpage"),
			success: function(res) {
				$.each(res.follows, function(k,v) {
					$("ol").append("<li>" + v.user.display_name + " followed you on " + v.created_at + "</li>")
				});
				
				$("#loadmore").data("nextpage", res._links.next);
			}
		});
	});
	</script>
</head>

<body>
<ol>
</ol>
</body>
</html>